!function(){function e(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}function i(e,i){if(e){if("string"==typeof e)return t(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,i)}}var r,l=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],s=new(function(){var e;function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.gameStatus="idle",this.score=0,this.field=e}return e=[{key:"moveLeft",value:function(){for(var e=0;e<this.field.length;e++)for(var t=1;t<this.field[e].length;t++){for(var i=t;i>0&&0===this.field[e][i-1];)this.field[e][i-1]=this.field[e][i],this.field[e][i]=0,i--;i>0&&this.field[e][i-1]===this.field[e][i]&&(this.score+=2*this.field[e][i-1],this.field[e][i-1]*=2,this.field[e][i]=0)}}},{key:"moveRight",value:function(){for(var e=0;e<this.field.length;e++)for(var t=this.field[e].length-1;t>=0;t--){for(var i=t;i<this.field[e].length-1&&0===this.field[e][i+1];)this.field[e][i+1]=this.field[e][i],this.field[e][i]=0,i++;i<this.field[e].length-1&&this.field[e][i+1]===this.field[e][i]&&(this.score+=2*this.field[e][i+1],this.field[e][i+1]*=2,this.field[e][i]=0)}}},{key:"moveUp",value:function(){for(var e=l.length,t=0;t<e;t++)for(var i=!1,r=1;r<e;r++)if(0!==l[r][t]){for(var s=r;s>0&&0===l[s-1][t];)l[s-1][t]=l[s][t],l[s][t]=0,s--;!i&&s>0&&l[s-1][t]===l[s][t]&&(l[s-1][t]*=2,l[s][t]=0,i=!0)}}},{key:"moveDown",value:function(){for(var e=this.field.length-2;e>=0;e--)for(var t=0;t<this.field[e].length;t++){for(var i=e;i<this.field.length-1&&0===this.field[i+1][t];)this.field[i+1][t]=this.field[i][t],this.field[i][t]=0,i++;i<this.field.length-1&&this.field[i+1][t]===this.field[i][t]&&(this.score+=2*this.field[i+1][t],this.field[i+1][t]*=2,this.field[i][t]=0)}}},{key:"start",value:function(){this.addingNumberToField(),this.addingNumberToField(),this.gameStatus="playing"}},{key:"restart",value:function(){this.field=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.addingNumberToField(),this.addingNumberToField(),u(),this.gameStatus="playing",this.score=0,c()}},{key:"addingNumberToField",value:function(){var e=+Math.floor(4*Math.random()),t=+Math.floor(4*Math.random());this.field[e][t]?this.addingNumberToField():(this.field[e][t]=Math.random()>=.9?4:2,u())}},{key:"checkVictory",value:function(){for(var e=0;e<this.field.length;e++)for(var t=0;t<this.field[e].length;t++)if(2048===this.field[e][t])return this.gameStatus="win",!0;return!1}},{key:"canMoveCellsRight",value:function(){for(var e=0;e<this.field.length;e++)for(var t=this.field[e].length-1;t>=0;t--)if(0===this.field[e][t+1]&&this.field[e][t]!==this.field[e][t+1]||this.field[e][t+1]===this.field[e][t]&&0!==this.field[e][t])return!0;return!1}},{key:"canMoveCellsLeft",value:function(){for(var e=0;e<this.field.length;e++)for(var t=this.field[e].length-1;t>=1;t--)if(0===this.field[e][t-1]&&this.field[e][t]!==this.field[e][t-1]||this.field[e][t-1]===this.field[e][t]&&0!==this.field[e][t])return!0;return!1}},{key:"canMoveCellsUp",value:function(){for(var e=1;e<this.field.length;e++)for(var t=0;t<this.field[e].length;t++)if(0===this.field[e-1][t]&&this.field[e][t]!==this.field[e-1][t]||this.field[e-1][t]===this.field[e][t]&&0!==this.field[e][t])return!0;return!1}},{key:"canMoveCellsDown",value:function(){for(var e=0;e<this.field.length-1;e++)for(var t=0;t<this.field[e].length;t++)if(0===this.field[e+1][t]&&this.field[e][t]!==this.field[e+1][t]||this.field[e+1][t]===this.field[e][t]&&0!==this.field[e][t])return!0;return!1}}],function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()),n=document.querySelector(".start"),a=document.querySelector(".message-start"),o=document.querySelector(".message-win"),d=document.querySelector(".message-lose"),f=document.querySelector(".game-score"),h=((function(e){if(Array.isArray(e))return e})(r=document.getElementsByClassName("field-cell"))||e(r)||i(r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).slice(0);function c(){for(var e=0;e<h.length;e++)h[e].className="field-cell",s.field.flat()[e]&&h[e].classList.add("field-cell--".concat(s.field.flat()[e]))}function u(){for(var r=0;r<h.length;r++)((function(e){if(Array.isArray(e))return t(e)})(h)||e(h)||i(h)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[r].innerText=s.field.flat()[r]||"";f.innerText=s.score}n.addEventListener("click",function(){n.classList.contains("start")||(s.restart(),d.classList.add("hidden"),o.classList.add("hidden"),f.innerText=s.score),n.classList.contains("start")&&(s.start(),n.classList.add("restart"),n.classList.remove("start"),n.innerText="Restart",a.classList.add("hidden")),u(),c()}),document.addEventListener("keyup",function(e){var t=!s.canMoveCellsDown()&&!s.canMoveCellsUp()&&!s.canMoveCellsRight()&&!s.canMoveCellsLeft();switch(e.key){case"ArrowUp":s.canMoveCellsUp()&&(s.checkVictory()||"playing"!==s.gameStatus||(s.moveUp(),s.addingNumberToField(),u(),c()),s.checkVictory()&&o.classList.remove("hidden")),t&&(s.gameStatus="lose",d.classList.remove("hidden"));break;case"ArrowLeft":s.canMoveCellsLeft()&&(s.checkVictory()||"playing"!==s.gameStatus||(s.moveLeft(),s.addingNumberToField(),u(),c()),s.checkVictory()&&o.classList.remove("hidden")),t&&(s.gameStatus="lose",d.classList.remove("hidden"));break;case"ArrowDown":s.canMoveCellsDown()&&(s.checkVictory()||"playing"!==s.gameStatus||(s.moveDown(),s.addingNumberToField(),u(),c()),s.checkVictory()&&o.classList.remove("hidden")),t&&(s.gameStatus="lose",d.classList.remove("hidden"));break;case"ArrowRight":s.canMoveCellsRight()&&(s.checkVictory()||"playing"!==s.gameStatus||(s.moveRight(),s.addingNumberToField(),u(),c()),s.checkVictory()&&o.classList.remove("hidden")),t&&(s.gameStatus="lose",d.classList.remove("hidden"))}})}();
//# sourceMappingURL=index.2651d60b.js.map
